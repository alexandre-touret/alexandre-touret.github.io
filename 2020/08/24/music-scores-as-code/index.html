<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Music Scores As Code - Alexandre Touret's Blog</title><meta name=Description content="Alexandre Touret's Blog"><meta property="og:title" content="Music Scores As Code">
<meta property="og:description" content="Derri√®re ce nom pompeux qui peut effrayer, je vais essayer d&rsquo;expliquer dans cet article comment on peut versionner facilement ses partitions et les publier sur le web.
En cherchant comment mettre de la documentation technique avec des diagrammes PlantUml dans des repos GITLAB et g√©n√©r√©s avec des pipelines, je me suis mis dans la t√™te de faire la m√™me chose avec des partitions üôÇ
Depuis plusieurs ann√©es, j&rsquo;utilise lilypond pour cr√©er mes partitions."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.touret.info/2020/08/24/music-scores-as-code/"><meta property="og:image" content="https://blog.touret.info/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-24T12:42:46+02:00"><meta property="article:modified_time" content="2023-03-02T18:52:03+01:00"><meta property="og:site_name" content="Alexandre Touret's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.touret.info/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg"><meta name=twitter:title content="Music Scores As Code"><meta name=twitter:description content="Derri√®re ce nom pompeux qui peut effrayer, je vais essayer d&rsquo;expliquer dans cet article comment on peut versionner facilement ses partitions et les publier sur le web.
En cherchant comment mettre de la documentation technique avec des diagrammes PlantUml dans des repos GITLAB et g√©n√©r√©s avec des pipelines, je me suis mis dans la t√™te de faire la m√™me chose avec des partitions üôÇ
Depuis plusieurs ann√©es, j&rsquo;utilise lilypond pour cr√©er mes partitions."><meta name=twitter:site content="@touret_alex"><meta name=application-name content="Alexandre Touret's Blog"><meta name=apple-mobile-web-app-title content="Alexandre Touret's Blog"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><meta name=twitter:creator content="@touret_alex"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://blog.touret.info/2020/08/24/music-scores-as-code/><link rel=prev href=https://blog.touret.info/2020/05/10/utiliser-des-github-actions-pour-deployer-dans-google-kubernetes-engine/><link rel=next href=https://blog.touret.info/2020/10/08/k8s-helm-et-cie-au-dela-de-la-hype/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><meta name=google-site-verification content="7UnqNmvO-mjfMkRqKaaWRPTBxSylEVJXvAn8iTfc7SI"><meta name=msvalidate.01 content="F9655A4C8648E42154ECB4B4D6CF60A2"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Music Scores As Code","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.touret.info/2020/08/24/music-scores-as-code/"},"image":["https://blog.touret.info/images/alexandre.touret.webp"],"genre":"posts","keywords":"docker, github, lilypond, planetlibre","wordcount":832,"url":"https://blog.touret.info/2020/08/24/music-scores-as-code/","datePublished":"2020-08-24T12:42:46+02:00","dateModified":"2023-03-02T18:52:03+01:00","license":"This work is licensed under a Creative Commons Attribution 4.0 International License.","publisher":{"@type":"Organization","name":"Alexandre Touret","logo":"https://blog.touret.info/images/alexandre.touret.webp"},"author":{"@type":"Person","name":"Alexandre Touret"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Alexandre Touret's Blog"><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/contact/>Contact </a><a class=menu-item href=/talks/>Talks </a><a class=menu-item href=/about/>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=javascript:void(0); class="menu-item theme-select" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title="Switch Theme"><option value=light>Light</option><option value=dark>Dark</option><option value=black>Black</option><option value=auto>Auto</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Alexandre Touret's Blog"><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/contact/ title>Contact</a><a class=menu-item href=/talks/ title>Talks</a><a class=menu-item href=/about/ title>About</a><a href=javascript:void(0); class="menu-item theme-select" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title="Switch Theme"><option value=light>Light</option><option value=dark>Dark</option><option value=black>Black</option><option value=auto>Auto</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#stockage>Stockage</a></li><li><a href=#g√©n√©rer-les-partitions-avec-une-github-action>G√©n√©rer les partitions avec une github action</a></li><li><a href=#publication>Publication</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Music Scores As Code</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=https://blog.touret.info title=Author target=_blank rel="noopener noreferrer author" class=author>Alexandre Touret</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-08-24>2020-08-24</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2023-03-02>2023-03-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;832 words&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div></div><div class=featured-image><img loading=eager src=/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg srcset="/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg, /assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg 1.5x, /assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg 2x" sizes=auto alt=/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg title=/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg height=auto width=auto></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#stockage>Stockage</a></li><li><a href=#g√©n√©rer-les-partitions-avec-une-github-action>G√©n√©rer les partitions avec une github action</a></li><li><a href=#publication>Publication</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>Derri√®re ce nom pompeux qui peut effrayer, je vais essayer d&rsquo;expliquer dans cet article comment on peut versionner facilement ses partitions et les publier sur le web.</p><p>En cherchant comment mettre de la documentation technique avec des diagrammes <a href=https://plantuml.com/ target=_blank rel="noopener noreferrer">PlantUml</a> dans des repos <a href=https://about.gitlab.com/ target=_blank rel="noopener noreferrer">GITLAB</a> et g√©n√©r√©s avec des pipelines, je me suis mis dans la t√™te de faire la m√™me chose avec des partitions üôÇ</p><p>Depuis plusieurs ann√©es, j&rsquo;utilise <a href=https://lilypond.org/ target=_blank rel="noopener noreferrer">lilypond</a> pour cr√©er mes partitions. C&rsquo;est un peu difficile de s&rsquo;y mettre, mais une fois la syntaxe assimil√©e, la saisie d&rsquo;une partition est beaucoup plus efficace. Le rendu des partitions est vraiment optimis√©.<br>Si vous voulez plus de d√©tails sur le pourquoi du comment je vous conseille <a href=https://lilypond.org/doc/v2.19/Documentation/essay-big-page target=_blank rel="noopener noreferrer">cette page</a>.</p><p>Vous trouverez des exemples sur <a href=https://lilypond.org/text-input.fr.html target=_blank rel="noopener noreferrer">le site</a>.</p><p>J&rsquo;ai donc eu l&rsquo;id√©e de:</p><ul><li>Stocker ces partitions sur un repo github (<em>jusque l√† rien d&rsquo;exceptionnel</em>)</li><li>G√©n√©rer automatiquement les partitions au format PDF, PNG et MIDI via une <a href=https://github.com/features/actions target=_blank rel="noopener noreferrer">github action</a> (<em>√ßa commence √† devenir int√©ressant‚Ä¶</em>)</li><li>Les publier avec <a href=https://pages.github.com/ target=_blank rel="noopener noreferrer">les github pages</a> (<em>tant qu&rsquo;√† faire üôÇ</em>)</li></ul><h2 id=stockage class=headerLink><a href=#stockage class=header-mark></a>1 Stockage</h2><p>Pourquoi stocker dans un r√©f√©rentiel de sources tel que Github ? Pour les non informaticiens : les partitions sont stock√©es au format texte.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-latex data-lang=latex><span class=line><span class=cl><span class=k>\version</span> &#34;2.12.1&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>\header</span> <span class=nb>{</span>
</span></span><span class=line><span class=cl>  title=&#34;Try a little tenderness&#34;
</span></span><span class=line><span class=cl>  composer=&#34;Harry Woods, Jimmy Campbell <span class=nb>&amp;</span> Reg Connely&#34;
</span></span><span class=line><span class=cl>  subtitle = &#34;Commitments Version&#34;
</span></span><span class=line><span class=cl>  <span class=c>%poet = &#34;Poete&#34;
</span></span></span><span class=line><span class=cl><span class=c></span>  instrument = &#34;Piano&#34;
</span></span><span class=line><span class=cl>  editor = &#34;L&#39;√©diteur&#34;
</span></span><span class=line><span class=cl>  <span class=c>%meter=\markup {\bold {&#34;Remarque sur le rhythme&#34;}}
</span></span></span><span class=line><span class=cl><span class=c></span>  style = &#34;Soul&#34;
</span></span><span class=line><span class=cl>  maintainer = &#34;Alexandre Touret&#34;
</span></span><span class=line><span class=cl>  maintainerEmail = &#34;alexandre.touret@free.fr&#34;
</span></span><span class=line><span class=cl>  maintainerWeb = &#34;http://blog.touret.info&#34;     
</span></span><span class=line><span class=cl>  lastupdated = &#34;&#34;
</span></span><span class=line><span class=cl>  source = &#34;Music room&#34;
</span></span><span class=line><span class=cl>  footer = &#34;Footer&#34;
</span></span><span class=line><span class=cl>  copyright =<span class=k>\markup</span> <span class=nb>{</span><span class=k>\fontsize</span> #-1.5
</span></span><span class=line><span class=cl> &#34;Delivered by A TOURET&#34;<span class=nb>}</span>
</span></span><span class=line><span class=cl><span class=nb>}</span>
</span></span><span class=line><span class=cl>upper=
</span></span><span class=line><span class=cl><span class=k>\relative</span> c&#39;<span class=nb>{</span>
</span></span><span class=line><span class=cl>  <span class=k>\clef</span> treble
</span></span><span class=line><span class=cl>  <span class=k>\time</span> 4/4
</span></span><span class=line><span class=cl>  <span class=k>\tempo</span> 4=176
</span></span><span class=line><span class=cl>  <span class=k>\key</span> g <span class=k>\major</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  d&#39;2 (b4 e
</span></span><span class=line><span class=cl>  d2 b4 a 
</span></span><span class=line><span class=cl>  g2 g2 
</span></span><span class=line><span class=cl>  &lt;e g,&gt;2) &lt;fis, c&#39; d&gt; 
</span></span><span class=line><span class=cl>  <span class=k>\bar</span> &#34;||&#34;
</span></span></code></pre></td></tr></table></div></div><p><a href=https://git-scm.com/ target=_blank rel="noopener noreferrer">GIT</a> et <a href=https://github.com target=_blank rel="noopener noreferrer">GITHUB</a> permettent de versionner facilement et pouvoir faire facilement un retour arri√®re en cas d&rsquo;erreur.<br>Aussi, GITHUB offre des <a href=https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests target=_blank rel="noopener noreferrer">fonctionnalit√©s ¬´¬†sociales¬†¬ª et collaboratives qui facilitent la revue des modifications</a> ( en cas de travail √† plusieurs ).<br>Bref, √ßa offre la s√©curit√© d&rsquo;une sauvegarde et la possibilit√© d&rsquo;un retour arri√®re en cas d&rsquo;erreur.</p><h2 id=g√©n√©rer-les-partitions-avec-une-github-action class=headerLink><a href=#g%c3%a9n%c3%a9rer-les-partitions-avec-une-github-action class=header-mark></a>2 G√©n√©rer les partitions avec une github action</h2><p>Les <a href=https://github.com/features/actions target=_blank rel="noopener noreferrer">github actions</a> sont des outils permettant:</p><blockquote class=wp-block-quote><p>GitHub Actions makes it easy to automate all your software workflows, now with world-class CI/CD. Build, test, and deploy your code right from GitHub. Make code reviews, branch management, and issue triaging work the way you want.</p></blockquote><p>J&rsquo;ai donc d√©cid√© de cr√©er un workflow qui permet de g√©n√©rer les partitions au format lilypond.</p><p>J&rsquo;ai mis √† disposition <a href=https://github.com/alexandre-touret/lilypond-github-action target=_blank rel="noopener noreferrer">le code sur github</a> sous <a href=https://www.gnu.org/licenses/gpl-3.0.en.html target=_blank rel="noopener noreferrer">licence GNU GPLv3</a>. Elle est utilisable telle quelle.</p><p>Pour cr√©er l&rsquo;action, il faut cr√©er un fichier action.yml √† la racine du repo. Voici le contenu</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>name</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=n>Lilypond</span><span class=w> </span><span class=n>Generator</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nl>description</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=n>Run</span><span class=w> </span><span class=n>Lilypond</span><span class=w> </span><span class=n>tool</span><span class=w> </span><span class=n>with</span><span class=w> </span><span class=n>the</span><span class=w> </span><span class=n>given</span><span class=w> </span><span class=n>set</span><span class=w> </span><span class=n>of</span><span class=w> </span><span class=n>arguments</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=n>generate</span><span class=w> </span><span class=n>music</span><span class=w> </span><span class=n>sheets</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nl>author</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=nd>@alexandre</span><span class=o>-</span><span class=n>touret</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nl>inputs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>args</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>description</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=n>Arguments</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>Lilyponid</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>required</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>default</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=o>-</span><span class=n>h</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nl>runs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>using</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=n>docker</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>image</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=n>Dockerfile</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>args</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>-</span><span class=w> </span><span class=n>$</span><span class=p>{{</span><span class=w> </span><span class=n>inputs</span><span class=p>.</span><span class=na>args</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nl>branding</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>icon</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=n>underline</span><span class=err>&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>color</span><span class=p>:</span><span class=w> </span><span class=err>&#39;</span><span class=n>blue</span><span class=err>&#39;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Vous aurez compris que ce fichier fait r√©f√©rence √† une <a href=https://github.com/alexandre-touret/lilypond-github-action/blob/master/Dockerfile target=_blank rel="noopener noreferrer">image Docker</a>. Cette derni√®re n&rsquo;est ni plus ni moins qu&rsquo;une Debian avec lilypond d&rsquo;install√©.</p><p>Pour l&rsquo;utiliser dans un repo github, on peut cr√©er une action qui l&rsquo;utilise. Voici un exemple:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>build_sheets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>runs</span><span class=o>-</span><span class=n>on</span><span class=p>:</span><span class=w> </span><span class=n>ubuntu</span><span class=o>-</span><span class=n>latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>LILYPOND_FILES</span><span class=p>:</span><span class=w> </span><span class=s>&#34;*.ly&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>-</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>Checkout</span><span class=w> </span><span class=n>Source</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>uses</span><span class=p>:</span><span class=w> </span><span class=n>actions</span><span class=o>/</span><span class=n>checkout</span><span class=nd>@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>-</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>Get</span><span class=w> </span><span class=n>changed</span><span class=w> </span><span class=n>files</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>id</span><span class=p>:</span><span class=w> </span><span class=n>getfile</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>run</span><span class=p>:</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=n>echo</span><span class=w> </span><span class=s>&#34;::set-output name=files::$(find ${{github.workspace}} -name &#34;</span><span class=n>$</span><span class=p>{{</span><span class=w> </span><span class=n>env</span><span class=p>.</span><span class=na>LILYPOND_FILES</span><span class=w> </span><span class=p>}}</span><span class=s>&#34; -printf &#34;</span><span class=o>%</span><span class=n>P</span><span class=err>\</span><span class=n>n</span><span class=s>&#34; | xargs)&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>-</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>LILYPOND</span><span class=w> </span><span class=n>files</span><span class=w> </span><span class=n>considered</span><span class=w> </span><span class=n>echo</span><span class=w> </span><span class=n>output</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>run</span><span class=p>:</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=n>echo</span><span class=w> </span><span class=n>$</span><span class=p>{{</span><span class=w> </span><span class=n>steps</span><span class=p>.</span><span class=na>getfile</span><span class=p>.</span><span class=na>outputs</span><span class=p>.</span><span class=na>files</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>-</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>Generate</span><span class=w> </span><span class=n>PDF</span><span class=w> </span><span class=n>music</span><span class=w> </span><span class=n>sheets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>uses</span><span class=p>:</span><span class=w> </span><span class=n>alexandre</span><span class=o>-</span><span class=n>touret</span><span class=o>/</span><span class=n>lilypond</span><span class=o>-</span><span class=n>github</span><span class=o>-</span><span class=n>action</span><span class=nd>@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>args</span><span class=p>:</span><span class=w> </span><span class=o>-</span><span class=n>V</span><span class=w> </span><span class=o>-</span><span class=n>f</span><span class=w> </span><span class=o>--</span><span class=n>pdf</span><span class=w> </span><span class=n>$</span><span class=p>{{</span><span class=w> </span><span class=n>steps</span><span class=p>.</span><span class=na>getfile</span><span class=p>.</span><span class=na>outputs</span><span class=p>.</span><span class=na>files</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>A la derni√®re ligne on peut passer <a href=http://lilypond.org/doc/v2.18/Documentation/usage/command_002dline-usage target=_blank rel="noopener noreferrer">les arguments n√©cessaires √† lilypond</a>.</p><h2 id=publication class=headerLink><a href=#publication class=header-mark></a>3 Publication</h2><p>La c&rsquo;est l&rsquo;√©tape la plus facile :). Il suffit d&rsquo;activer <a href=https://pages.github.com/ target=_blank rel="noopener noreferrer">les github pages</a> et de commiter et pusher les partitions g√©n√©r√©es</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>-</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>Push</span><span class=w> </span><span class=n>Local</span><span class=w> </span><span class=n>Changes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>run</span><span class=p>:</span><span class=w> </span><span class=o>|</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=n>git</span><span class=w> </span><span class=n>config</span><span class=w> </span><span class=o>--</span><span class=n>local</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=na>email</span><span class=w> </span><span class=s>&#34;${{ secrets.GIT_USERNAME }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=n>git</span><span class=w> </span><span class=n>config</span><span class=w> </span><span class=o>--</span><span class=n>local</span><span class=w> </span><span class=n>user</span><span class=p>.</span><span class=na>name</span><span class=w> </span><span class=s>&#34;${{ secrets.GIT_EMAIL }}&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=n>git</span><span class=w> </span><span class=n>add</span><span class=w> </span><span class=p>.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=n>git</span><span class=w> </span><span class=n>commit</span><span class=w> </span><span class=o>-</span><span class=n>m</span><span class=w> </span><span class=s>&#34;Add changes&#34;</span><span class=w> </span><span class=o>-</span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=o>-</span><span class=w> </span><span class=n>name</span><span class=p>:</span><span class=w> </span><span class=n>Push</span><span class=w> </span><span class=n>changes</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>uses</span><span class=p>:</span><span class=w> </span><span class=n>ad</span><span class=o>-</span><span class=n>m</span><span class=o>/</span><span class=n>github</span><span class=o>-</span><span class=n>push</span><span class=o>-</span><span class=n>action</span><span class=nd>@master</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=n>github_token</span><span class=p>:</span><span class=w> </span><span class=n>$</span><span class=p>{{</span><span class=w> </span><span class=n>secrets</span><span class=p>.</span><span class=na>GITHUB_TOKEN</span><span class=w> </span><span class=p>}}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Il suffit de cr√©er une page index.md √† la racine et d&rsquo;ajouter des liens vers les partitions g√©n√©r√©es ( dans mon cas, √ßa se passe dans le r√©pertoire /docs ).<br>Vous pouvez trouver un exemple <a href=https://alexandre-touret.github.io/piano-sheets-as-code/ target=_blank rel="noopener noreferrer">ici</a>.</p><h2 id=conclusion class=headerLink><a href=#conclusion class=header-mark></a>4 Conclusion</h2><p>Voila comment on peut g√©n√©rer un site avec des partitions cr√©es avec Lilypond.<br>Vous trouverez les diff√©rents liens ci-dessous. Peut √™tre que je publierai cette action sur le marketplace une fois que j&rsquo;aurai publi√© une documentation digne de ce nom :).</p><ul><li><a href=https://github.com/alexandre-touret/lilypond-github-action target=_blank rel="noopener noreferrer">Action</a></li><li><a href=https://github.com/alexandre-touret/piano-sheets-as-code target=_blank rel="noopener noreferrer">Exemple d&rsquo;utilisation</a></li><li><a href=https://alexandre-touret.github.io/piano-sheets-as-code/ target=_blank rel="noopener noreferrer">Exemple de site g√©n√©r√©</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-03-02&nbsp;<a class=git-hash href=https://github.com/alexandre-touret/alexandre-touret.github.io/commit/375bd449aa0d25e75c30b33fdae2da7a4b75de66 target=_blank title="commit by Alexandre Touret(alexandre-touret@users.noreply.github.com) 375bd449aa0d25e75c30b33fdae2da7a4b75de66: twitter card images" rel="noopener noreferrer">
<i class="fas fa-hashtag fa-fw"></i>375bd44</a></span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-mardown href=/2020/08/24/music-scores-as-code/index.md target=_blank rel="noopener noreferrer">Read markdown</a>
</span><span>|&nbsp;<a class=link-to-source href=https://github.com/alexandre-touret/alexandre-touret.github.io/blob/main/exampleSite/content/posts/music-scores-as-code.md target=_blank rel="noopener noreferrer">View source</a>
</span><span>|&nbsp;<a class=link-to-report href="https://github.com/alexandre-touret/alexandre-touret.github.io/issues/new?title=[bug]%20Music+Scores+As+Code&body=|Field|Value|%0A|-|-|%0A|Title|Music+Scores+As+Code|%0A|Url|https://blog.touret.info/2020/08/24/music-scores-as-code/|%0A|Filename|https://github.com/HEIGE-PCloud/DoIt/blob/main/exampleSite/content/posts/music-scores-as-code.md|" target=_blank rel="noopener noreferrer">Report issue</a></span></div><div class=post-info-share></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/docker/>docker</a>,&nbsp;<a href=/tags/github/>github</a>,&nbsp;<a href=/tags/lilypond/>lilypond</a>,&nbsp;<a href=/tags/planetlibre/>planetlibre</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2020/05/10/utiliser-des-github-actions-pour-deployer-dans-google-kubernetes-engine/ class=prev rel=prev title="Utiliser des GITHUB Actions pour d√©ployer dans Google Kubernetes Engine"><i class="fas fa-angle-left fa-fw"></i>Utiliser des GITHUB Actions pour d√©ployer dans Google Kubernetes Engine</a>
<a href=/2020/10/08/k8s-helm-et-cie-au-dela-de-la-hype/ class=next rel=next title="K8S, HELM et Cie: au del√† de la hype">K8S, HELM et Cie: au del√† de la hype<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.121.2">Hugo</a>&nbsp;|&nbsp;Theme - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://blog.touret.info target=_blank rel="noopener noreferrer">Alexandre Touret</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC BY 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"",lightTheme:"github-light",repo:"alexandre-touret/alexandre-touret.github.io"}},data:{"desktop-header-typeit":"blog.touret.info","mobile-header-typeit":"blog.touret.info"},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"No results found",snippetLength:300,threshold:.1,type:"fuse",useExtendedSearch:!1},table:{sort:!0},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:-1,speed:100}}</script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script><script type=text/javascript src=/js/utterances.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F1EK89MHJD",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-F1EK89MHJD" async></script></div></body></html>