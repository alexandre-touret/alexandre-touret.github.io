<!doctype html><html lang=fr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Music Scores As Code - Alexandre Touret's Blog</title><meta name=Description content="Architecte logiciel, d√©veloppeur, bidouilleur (dans le d√©sordre)"><meta property="og:title" content="Music Scores As Code"><meta property="og:description" content="Derri√®re ce nom pompeux qui peut effrayer, je vais essayer d&rsquo;expliquer dans cet article comment on peut versionner facilement ses partitions et les publier sur le web.
En cherchant comment mettre de la documentation technique avec des diagrammes PlantUml dans des repos GITLAB et g√©n√©r√©s avec des pipelines, je me suis mis dans la t√™te de faire la m√™me chose avec des partitions üôÇ
Depuis plusieurs ann√©es, j&rsquo;utilise lilypond pour cr√©er mes partitions."><meta property="og:type" content="article"><meta property="og:url" content="/2020/08/24/music-scores-as-code/"><meta property="og:image" content="/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-24T12:42:46+02:00"><meta property="article:modified_time" content="2023-03-02T18:52:03+01:00"><meta property="og:site_name" content="blog.touret.info"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg"><meta name=twitter:title content="Music Scores As Code"><meta name=twitter:description content="Derri√®re ce nom pompeux qui peut effrayer, je vais essayer d&rsquo;expliquer dans cet article comment on peut versionner facilement ses partitions et les publier sur le web.
En cherchant comment mettre de la documentation technique avec des diagrammes PlantUml dans des repos GITLAB et g√©n√©r√©s avec des pipelines, je me suis mis dans la t√™te de faire la m√™me chose avec des partitions üôÇ
Depuis plusieurs ann√©es, j&rsquo;utilise lilypond pour cr√©er mes partitions."><meta name=application-name content="LoveIt"><meta name=apple-mobile-web-app-title content="LoveIt"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=canonical href=/2020/08/24/music-scores-as-code/><link rel=prev href=/2020/05/10/utiliser-des-github-actions-pour-deployer-dans-google-kubernetes-engine/><link rel=next href=/2020/10/08/k8s-helm-et-cie-au-dela-de-la-hype/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><meta name=google-site-verification content="7UnqNmvO-mjfMkRqKaaWRPTBxSylEVJXvAn8iTfc7SI"><meta name=msvalidate.01 content="F9655A4C8648E42154ECB4B4D6CF60A2"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Music Scores As Code","inLanguage":"fr","mainEntityOfPage":{"@type":"WebPage","@id":"\/2020\/08\/24\/music-scores-as-code\/"},"image":["\/images\/alexandre-touret.webp"],"genre":"posts","keywords":"docker, github, lilypond, planetlibre","wordcount":832,"url":"\/2020\/08\/24\/music-scores-as-code\/","datePublished":"2020-08-24T12:42:46+02:00","dateModified":"2023-03-02T18:52:03+01:00","license":"This work is licensed under a Creative Commons Attribution 4.0 International License.","publisher":{"@type":"Organization","name":"Alexandre Touret","logo":"\/images\/alexandre-touret.webp"},"author":{"@type":"Person","name":"Alexandre Touret"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Alexandre Touret's Blog">blog.touret.info</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/ title=Articles>Articles </a><a class=menu-item href=/contact/>Contact </a><a class=menu-item href=/talks/ title=Talks>Conf√©rences </a><a class=menu-item href=/a-propos/ title="√Ä propos">√Ä propos </a><a class=menu-item href=/https:/blog.touret.info/index.xml><i class='fa fa-rss-square fa-fw' aria-hidden=true></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Rechercher des titres, des contenus..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Chercher><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clair><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Changer de Th√®me"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title="Choisir la langue"><i class="fa fa-globe" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/2020/08/24/music-scores-as-code/ selected>Fran√ßais</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Alexandre Touret's Blog">blog.touret.info</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Rechercher des titres, des contenus..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Chercher><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clair><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Annuler</a></div><a class=menu-item href=/posts/ title=Articles>Articles</a><a class=menu-item href=/contact/ title>Contact</a><a class=menu-item href=/talks/ title=Talks>Conf√©rences</a><a class=menu-item href=/a-propos/ title="√Ä propos">√Ä propos</a><a class=menu-item href=/https:/blog.touret.info/index.xml title><i class='fa fa-rss-square fa-fw' aria-hidden=true></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Changer de Th√®me">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title="Choisir la langue"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/2020/08/24/music-scores-as-code/ selected>Fran√ßais</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contenu</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Music Scores As Code</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://blog.touret.info title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Alexandre Touret</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2020-08-24>2020-08-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;832 mots&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;4 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg data-srcset="/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg, /assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg 1.5x, /assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg 2x" data-sizes=auto alt=/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg title=/assets/images/2020/08/cesar-abner-martinez-aguilar-_lmekwwtiwy-unsplash.jpg></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contenu</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#stockage>Stockage</a></li><li><a href=#g√©n√©rer-les-partitions-avec-une-github-action>G√©n√©rer les partitions avec une github action</a></li><li><a href=#publication>Publication</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>Derri√®re ce nom pompeux qui peut effrayer, je vais essayer d&rsquo;expliquer dans cet article comment on peut versionner facilement ses partitions et les publier sur le web.</p><p>En cherchant comment mettre de la documentation technique avec des diagrammes <a href=https://plantuml.com/ target=_blank rel="noopener noreffer">PlantUml</a> dans des repos <a href=https://about.gitlab.com/ target=_blank rel="noopener noreffer">GITLAB</a> et g√©n√©r√©s avec des pipelines, je me suis mis dans la t√™te de faire la m√™me chose avec des partitions üôÇ</p><p>Depuis plusieurs ann√©es, j&rsquo;utilise <a href=https://lilypond.org/ target=_blank rel="noopener noreffer">lilypond</a> pour cr√©er mes partitions. C&rsquo;est un peu difficile de s&rsquo;y mettre, mais une fois la syntaxe assimil√©e, la saisie d&rsquo;une partition est beaucoup plus efficace. Le rendu des partitions est vraiment optimis√©.<br>Si vous voulez plus de d√©tails sur le pourquoi du comment je vous conseille <a href=https://lilypond.org/doc/v2.19/Documentation/essay-big-page target=_blank rel="noopener noreffer">cette page</a>.</p><p>Vous trouverez des exemples sur <a href=https://lilypond.org/text-input.fr.html target=_blank rel="noopener noreffer">le site</a>.</p><p>J&rsquo;ai donc eu l&rsquo;id√©e de:</p><ul><li>Stocker ces partitions sur un repo github (<em>jusque l√† rien d&rsquo;exceptionnel</em>)</li><li>G√©n√©rer automatiquement les partitions au format PDF, PNG et MIDI via une <a href=https://github.com/features/actions target=_blank rel="noopener noreffer">github action</a> (<em>√ßa commence √† devenir int√©ressant‚Ä¶</em>)</li><li>Les publier avec <a href=https://pages.github.com/ target=_blank rel="noopener noreffer">les github pages</a> (<em>tant qu&rsquo;√† faire üôÇ</em>)</li></ul><h2 id=stockage>Stockage</h2><p>Pourquoi stocker dans un r√©f√©rentiel de sources tel que Github ? Pour les non informaticiens : les partitions sont stock√©es au format texte.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-latex data-lang=latex><span class=line><span class=cl><span class=k>\version</span> &#34;2.12.1&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>\header</span> <span class=nb>{</span>
</span></span><span class=line><span class=cl>  title=&#34;Try a little tenderness&#34;
</span></span><span class=line><span class=cl>  composer=&#34;Harry Woods, Jimmy Campbell <span class=nb>&amp;</span> Reg Connely&#34;
</span></span><span class=line><span class=cl>  subtitle = &#34;Commitments Version&#34;
</span></span><span class=line><span class=cl>  <span class=c>%poet = &#34;Poete&#34;
</span></span></span><span class=line><span class=cl><span class=c></span>  instrument = &#34;Piano&#34;
</span></span><span class=line><span class=cl>  editor = &#34;L&#39;√©diteur&#34;
</span></span><span class=line><span class=cl>  <span class=c>%meter=\markup {\bold {&#34;Remarque sur le rhythme&#34;}}
</span></span></span><span class=line><span class=cl><span class=c></span>  style = &#34;Soul&#34;
</span></span><span class=line><span class=cl>  maintainer = &#34;Alexandre Touret&#34;
</span></span><span class=line><span class=cl>  maintainerEmail = &#34;alexandre.touret@free.fr&#34;
</span></span><span class=line><span class=cl>  maintainerWeb = &#34;http://blog.touret.info&#34;     
</span></span><span class=line><span class=cl>  lastupdated = &#34;&#34;
</span></span><span class=line><span class=cl>  source = &#34;Music room&#34;
</span></span><span class=line><span class=cl>  footer = &#34;Footer&#34;
</span></span><span class=line><span class=cl>  copyright =<span class=k>\markup</span> <span class=nb>{</span><span class=k>\fontsize</span> #-1.5
</span></span><span class=line><span class=cl> &#34;Delivered by A TOURET&#34;<span class=nb>}</span>
</span></span><span class=line><span class=cl><span class=nb>}</span>
</span></span><span class=line><span class=cl>upper=
</span></span><span class=line><span class=cl><span class=k>\relative</span> c&#39;<span class=nb>{</span>
</span></span><span class=line><span class=cl>  <span class=k>\clef</span> treble
</span></span><span class=line><span class=cl>  <span class=k>\time</span> 4/4
</span></span><span class=line><span class=cl>  <span class=k>\tempo</span> 4=176
</span></span><span class=line><span class=cl>  <span class=k>\key</span> g <span class=k>\major</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>  d&#39;2 (b4 e
</span></span><span class=line><span class=cl>  d2 b4 a 
</span></span><span class=line><span class=cl>  g2 g2 
</span></span><span class=line><span class=cl>  &lt;e g,&gt;2) &lt;fis, c&#39; d&gt; 
</span></span><span class=line><span class=cl>  <span class=k>\bar</span> &#34;||&#34;
</span></span></code></pre></td></tr></table></div></div><p><a href=https://git-scm.com/ target=_blank rel="noopener noreffer">GIT</a> et <a href=https://github.com target=_blank rel="noopener noreffer">GITHUB</a> permettent de versionner facilement et pouvoir faire facilement un retour arri√®re en cas d&rsquo;erreur.<br>Aussi, GITHUB offre des <a href=https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests target=_blank rel="noopener noreffer">fonctionnalit√©s ¬´¬†sociales¬†¬ª et collaboratives qui facilitent la revue des modifications</a> ( en cas de travail √† plusieurs ).<br>Bref, √ßa offre la s√©curit√© d&rsquo;une sauvegarde et la possibilit√© d&rsquo;un retour arri√®re en cas d&rsquo;erreur.</p><h2 id=g√©n√©rer-les-partitions-avec-une-github-action>G√©n√©rer les partitions avec une github action</h2><p>Les <a href=https://github.com/features/actions target=_blank rel="noopener noreffer">github actions</a> sont des outils permettant:</p><blockquote class=wp-block-quote><p>GitHub Actions makes it easy to automate all your software workflows, now with world-class CI/CD. Build, test, and deploy your code right from GitHub. Make code reviews, branch management, and issue triaging work the way you want.</p></blockquote><p>J&rsquo;ai donc d√©cid√© de cr√©er un workflow qui permet de g√©n√©rer les partitions au format lilypond.</p><p>J&rsquo;ai mis √† disposition <a href=https://github.com/alexandre-touret/lilypond-github-action target=_blank rel="noopener noreffer">le code sur github</a> sous <a href=https://www.gnu.org/licenses/gpl-3.0.en.html target=_blank rel="noopener noreffer">licence GNU GPLv3</a>. Elle est utilisable telle quelle.</p><p>Pour cr√©er l&rsquo;action, il faut cr√©er un fichier action.yml √† la racine du repo. Voici le contenu</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>name:</span> <span class=err>&#39;</span><span class=n>Lilypond</span> <span class=n>Generator</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl><span class=nl>description:</span> <span class=err>&#39;</span><span class=n>Run</span> <span class=n>Lilypond</span> <span class=n>tool</span> <span class=n>with</span> <span class=n>the</span> <span class=n>given</span> <span class=n>set</span> <span class=n>of</span> <span class=n>arguments</span> <span class=n>to</span> <span class=n>generate</span> <span class=n>music</span> <span class=n>sheets</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl><span class=nl>author:</span> <span class=err>&#39;</span><span class=nd>@alexandre</span><span class=o>-</span><span class=n>touret</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl><span class=nl>
</span></span></span><span class=line><span class=cl><span class=nl>inputs:</span>
</span></span><span class=line><span class=cl>  <span class=n>args</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=o>:</span> <span class=err>&#39;</span><span class=n>Arguments</span> <span class=k>for</span> <span class=n>Lilyponid</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>required</span><span class=o>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>    <span class=k>default</span><span class=o>:</span> <span class=err>&#39;</span><span class=o>-</span><span class=n>h</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl><span class=nl>
</span></span></span><span class=line><span class=cl><span class=nl>runs:</span>
</span></span><span class=line><span class=cl>    <span class=n>using</span><span class=o>:</span> <span class=err>&#39;</span><span class=n>docker</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>image</span><span class=o>:</span> <span class=err>&#39;</span><span class=n>Dockerfile</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>args</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=o>-</span> <span class=n>$</span><span class=o>{{</span> <span class=n>inputs</span><span class=o>.</span><span class=na>args</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl><span class=nl>
</span></span></span><span class=line><span class=cl><span class=nl>branding:</span>
</span></span><span class=line><span class=cl>  <span class=n>icon</span><span class=o>:</span> <span class=err>&#39;</span><span class=n>underline</span><span class=err>&#39;</span>
</span></span><span class=line><span class=cl>  <span class=n>color</span><span class=o>:</span> <span class=err>&#39;</span><span class=n>blue</span><span class=err>&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>Vous aurez compris que ce fichier fait r√©f√©rence √† une <a href=https://github.com/alexandre-touret/lilypond-github-action/blob/master/Dockerfile target=_blank rel="noopener noreffer">image Docker</a>. Cette derni√®re n&rsquo;est ni plus ni moins qu&rsquo;une Debian avec lilypond d&rsquo;install√©.</p><p>Pour l&rsquo;utiliser dans un repo github, on peut cr√©er une action qui l&rsquo;utilise. Voici un exemple:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nl>jobs:</span>
</span></span><span class=line><span class=cl>  <span class=n>build_sheets</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=n>runs</span><span class=o>-</span><span class=n>on</span><span class=o>:</span> <span class=n>ubuntu</span><span class=o>-</span><span class=n>latest</span>
</span></span><span class=line><span class=cl>    <span class=n>env</span><span class=o>:</span>
</span></span><span class=line><span class=cl>        <span class=n>LILYPOND_FILES</span><span class=o>:</span> <span class=s>&#34;*.ly&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>steps</span><span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=o>-</span> <span class=n>name</span><span class=o>:</span> <span class=n>Checkout</span> <span class=n>Source</span> 
</span></span><span class=line><span class=cl>        <span class=n>uses</span><span class=o>:</span> <span class=n>actions</span><span class=o>/</span><span class=n>checkout</span><span class=nd>@v1</span>
</span></span><span class=line><span class=cl>      <span class=o>-</span> <span class=n>name</span><span class=o>:</span> <span class=n>Get</span> <span class=n>changed</span> <span class=n>files</span>
</span></span><span class=line><span class=cl>        <span class=n>id</span><span class=o>:</span> <span class=n>getfile</span>
</span></span><span class=line><span class=cl>        <span class=n>run</span><span class=o>:</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>          <span class=n>echo</span> <span class=s>&#34;::set-output name=files::$(find ${{github.workspace}} -name &#34;</span><span class=n>$</span><span class=o>{{</span> <span class=n>env</span><span class=o>.</span><span class=na>LILYPOND_FILES</span> <span class=o>}}</span><span class=s>&#34; -printf &#34;</span><span class=o>%</span><span class=n>P</span><span class=err>\</span><span class=n>n</span><span class=s>&#34; | xargs)&#34;</span>
</span></span><span class=line><span class=cl>      <span class=o>-</span> <span class=n>name</span><span class=o>:</span> <span class=n>LILYPOND</span> <span class=n>files</span> <span class=n>considered</span> <span class=n>echo</span> <span class=n>output</span>
</span></span><span class=line><span class=cl>        <span class=n>run</span><span class=o>:</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>          <span class=n>echo</span> <span class=n>$</span><span class=o>{{</span> <span class=n>steps</span><span class=o>.</span><span class=na>getfile</span><span class=o>.</span><span class=na>outputs</span><span class=o>.</span><span class=na>files</span> <span class=o>}}</span>
</span></span><span class=line><span class=cl>      <span class=o>-</span> <span class=n>name</span><span class=o>:</span> <span class=n>Generate</span> <span class=n>PDF</span> <span class=n>music</span> <span class=n>sheets</span>
</span></span><span class=line><span class=cl>        <span class=n>uses</span><span class=o>:</span> <span class=n>alexandre</span><span class=o>-</span><span class=n>touret</span><span class=o>/</span><span class=n>lilypond</span><span class=o>-</span><span class=n>github</span><span class=o>-</span><span class=n>action</span><span class=nd>@master</span>
</span></span><span class=line><span class=cl>        <span class=n>with</span><span class=o>:</span>
</span></span><span class=line><span class=cl>            <span class=n>args</span><span class=o>:</span> <span class=o>-</span><span class=n>V</span> <span class=o>-</span><span class=n>f</span> <span class=o>--</span><span class=n>pdf</span> <span class=n>$</span><span class=o>{{</span> <span class=n>steps</span><span class=o>.</span><span class=na>getfile</span><span class=o>.</span><span class=na>outputs</span><span class=o>.</span><span class=na>files</span> <span class=o>}}</span>
</span></span></code></pre></td></tr></table></div></div><p>A la derni√®re ligne on peut passer <a href=http://lilypond.org/doc/v2.18/Documentation/usage/command_002dline-usage target=_blank rel="noopener noreffer">les arguments n√©cessaires √† lilypond</a>.</p><h2 id=publication>Publication</h2><p>La c&rsquo;est l&rsquo;√©tape la plus facile :). Il suffit d&rsquo;activer <a href=https://pages.github.com/ target=_blank rel="noopener noreffer">les github pages</a> et de commiter et pusher les partitions g√©n√©r√©es</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=o>-</span> <span class=n>name</span><span class=o>:</span> <span class=n>Push</span> <span class=n>Local</span> <span class=n>Changes</span>
</span></span><span class=line><span class=cl>        <span class=n>run</span><span class=o>:</span> <span class=o>|</span>
</span></span><span class=line><span class=cl>          <span class=n>git</span> <span class=n>config</span> <span class=o>--</span><span class=n>local</span> <span class=n>user</span><span class=o>.</span><span class=na>email</span> <span class=s>&#34;${{ secrets.GIT_USERNAME }}&#34;</span>
</span></span><span class=line><span class=cl>          <span class=n>git</span> <span class=n>config</span> <span class=o>--</span><span class=n>local</span> <span class=n>user</span><span class=o>.</span><span class=na>name</span> <span class=s>&#34;${{ secrets.GIT_EMAIL }}&#34;</span>
</span></span><span class=line><span class=cl>          <span class=n>git</span> <span class=n>add</span> <span class=o>.</span>
</span></span><span class=line><span class=cl>          <span class=n>git</span> <span class=n>commit</span> <span class=o>-</span><span class=n>m</span> <span class=s>&#34;Add changes&#34;</span> <span class=o>-</span><span class=n>a</span>
</span></span><span class=line><span class=cl>      <span class=o>-</span> <span class=n>name</span><span class=o>:</span> <span class=n>Push</span> <span class=n>changes</span>
</span></span><span class=line><span class=cl>        <span class=n>uses</span><span class=o>:</span> <span class=n>ad</span><span class=o>-</span><span class=n>m</span><span class=o>/</span><span class=n>github</span><span class=o>-</span><span class=n>push</span><span class=o>-</span><span class=n>action</span><span class=nd>@master</span>
</span></span><span class=line><span class=cl>        <span class=n>with</span><span class=o>:</span>
</span></span><span class=line><span class=cl>          <span class=n>github_token</span><span class=o>:</span> <span class=n>$</span><span class=o>{{</span> <span class=n>secrets</span><span class=o>.</span><span class=na>GITHUB_TOKEN</span> <span class=o>}}</span>
</span></span></code></pre></td></tr></table></div></div><p>Il suffit de cr√©er une page index.md √† la racine et d&rsquo;ajouter des liens vers les partitions g√©n√©r√©es ( dans mon cas, √ßa se passe dans le r√©pertoire /docs ).<br>Vous pouvez trouver un exemple <a href=https://alexandre-touret.github.io/piano-sheets-as-code/ target=_blank rel="noopener noreffer">ici</a>.</p><h2 id=conclusion>Conclusion</h2><p>Voila comment on peut g√©n√©rer un site avec des partitions cr√©es avec Lilypond.<br>Vous trouverez les diff√©rents liens ci-dessous. Peut √™tre que je publierai cette action sur le marketplace une fois que j&rsquo;aurai publi√© une documentation digne de ce nom :).</p><ul><li><a href=https://github.com/alexandre-touret/lilypond-github-action target=_blank rel="noopener noreffer">Action</a></li><li><a href=https://github.com/alexandre-touret/piano-sheets-as-code target=_blank rel="noopener noreffer">Exemple d&rsquo;utilisation</a></li><li><a href=https://alexandre-touret.github.io/piano-sheets-as-code/ target=_blank rel="noopener noreffer">Exemple de site g√©n√©r√©</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Mis √† jour le 2023-03-02&nbsp;<a class=git-hash href=https://github.com/alexandre-touret/alexandre-touret.github.io/commit/375bd449aa0d25e75c30b33fdae2da7a4b75de66 target=_blank title="commit by Alexandre Touret(alexandre-touret@users.noreply.github.com) 375bd449aa0d25e75c30b33fdae2da7a4b75de66: twitter card images">
<i class="fas fa-hashtag fa-fw" aria-hidden=true></i>375bd44</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2020/08/24/music-scores-as-code/index.md target=_blank>Lire Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Partager sur Twitter" data-sharer=twitter data-url=/2020/08/24/music-scores-as-code/ data-title="Music Scores As Code" data-via=touret_alex data-hashtags=docker,github,lilypond,planetlibre><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Partager sur Linkedin" data-sharer=linkedin data-url=/2020/08/24/music-scores-as-code/><i class="fab fa-linkedin fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Partager sur Hacker News" data-sharer=hackernews data-url=/2020/08/24/music-scores-as-code/ data-title="Music Scores As Code"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/docker/>docker</a>,&nbsp;<a href=/tags/github/>github</a>,&nbsp;<a href=/tags/lilypond/>lilypond</a>,&nbsp;<a href=/tags/planetlibre/>planetlibre</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Retour</a></span>&nbsp;|&nbsp;<span><a href=/>Accueil</a></span></section></div><div class=post-nav><a href=/2020/05/10/utiliser-des-github-actions-pour-deployer-dans-google-kubernetes-engine/ class=prev rel=prev title="Utiliser des GITHUB Actions pour d√©ployer dans Google Kubernetes Engine"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Utiliser des GITHUB Actions pour d√©ployer dans Google Kubernetes Engine</a>
<a href=/2020/10/08/k8s-helm-et-cie-au-dela-de-la-hype/ class=next rel=next title="K8S, HELM et Cie: au del√† de la hype">K8S, HELM et Cie: au del√† de la hype<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=utterances class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><a rel=me href=https://piaille.fr/@alexandre></a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://blog.touret.info target=_blank>Alexandre Touret</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC BY 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Retour en Haut"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="Afficher les Commentaires"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.fr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copier dans le presse-papiers",maxShownLines:50},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"",lightTheme:"github-light",repo:"alexandre-touret/alexandre-touret.github.io"}},lightgallery:!0,search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"fr",maxResultLength:10,noResultsFound:"Aucun r√©sultat trouv√©",snippetLength:50,type:"lunr"},twemoji:!0}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","google-gtag",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=google-gtag" async></script></body></html>