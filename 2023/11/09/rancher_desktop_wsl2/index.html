<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Configuring WSL2 for Seamless Compatibility with Rancher Desktop - Alexandre Touret's Blog</title><meta name=Description content="Alexandre Touret's Blog"><meta property="og:title" content="Configuring WSL2 for Seamless Compatibility with Rancher Desktop">
<meta property="og:description" content="Just out of curiosity, I downloaded and sat up Rancher Desktop on my laptop.
I daily use Docker and Docker compose on top of WSL2 using home made mechanism/tooling I would then see if Rancher Desktop fits well in this case and could help me.
In this (very short) article, we&rsquo;ll go over the necessary steps to configure WSL2 Ubuntu virtual machines and Docker with Rancher Desktop.
If you want to get into Rancher Desktop in another way and discover how to install Skaffold, you can read this article."><meta property="og:type" content="article"><meta property="og:url" content="http://blog.touret.info/2023/11/09/rancher_desktop_wsl2/"><meta property="og:image" content="http://blog.touret.info/assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-09T08:00:16+01:00"><meta property="article:modified_time" content="2023-11-09T11:33:03+01:00"><meta property="og:site_name" content="Alexandre Touret's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://blog.touret.info/assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp"><meta name=twitter:title content="Configuring WSL2 for Seamless Compatibility with Rancher Desktop"><meta name=twitter:description content="Just out of curiosity, I downloaded and sat up Rancher Desktop on my laptop.
I daily use Docker and Docker compose on top of WSL2 using home made mechanism/tooling I would then see if Rancher Desktop fits well in this case and could help me.
In this (very short) article, we&rsquo;ll go over the necessary steps to configure WSL2 Ubuntu virtual machines and Docker with Rancher Desktop.
If you want to get into Rancher Desktop in another way and discover how to install Skaffold, you can read this article."><meta name=twitter:site content="@touret_alex"><meta name=application-name content="Alexandre Touret's Blog"><meta name=apple-mobile-web-app-title content="Alexandre Touret's Blog"><meta name=theme-color content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><meta name=twitter:creator content="@touret_alex"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=http://blog.touret.info/2023/11/09/rancher_desktop_wsl2/><link rel=prev href=http://blog.touret.info/2023/11/01/pack-ship-java-deployment-distributed-tracing-elasticapm/><link rel=stylesheet href=/css/main.css><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/color.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><meta name=google-site-verification content="7UnqNmvO-mjfMkRqKaaWRPTBxSylEVJXvAn8iTfc7SI"><meta name=msvalidate.01 content="F9655A4C8648E42154ECB4B4D6CF60A2"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Configuring WSL2 for Seamless Compatibility with Rancher Desktop","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http://blog.touret.info/2023/11/09/rancher_desktop_wsl2/"},"image":["http://blog.touret.info/images/alexandre.touret.webp"],"genre":"posts","keywords":"WSL2, Rancher_Desktop, Docker","wordcount":407,"url":"http://blog.touret.info/2023/11/09/rancher_desktop_wsl2/","datePublished":"2023-11-09T08:00:16+01:00","dateModified":"2023-11-09T11:33:03+01:00","license":"This work is licensed under a Creative Commons Attribution 4.0 International License.","publisher":{"@type":"Organization","name":"Alexandre Touret","logo":"http://blog.touret.info/images/alexandre.touret.webp"},"author":{"@type":"Person","name":"Alexandre Touret"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark"),window.theme=e,window.isDark=window.theme!=="light"}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")],window.switchThemeEventSet=new Set</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Alexandre Touret's Blog"><span id=desktop-header-typeit class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/contact/>Contact </a><a class=menu-item href=/talks/>Talks </a><a class=menu-item href=/about/>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i>
</span></span><a href=javascript:void(0); class="menu-item theme-select" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-desktop title="Switch Theme"><option value=light>Light</option><option value=dark>Dark</option><option value=black>Black</option><option value=auto>Auto</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Alexandre Touret's Blog"><span id=mobile-header-typeit class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/contact/ title>Contact</a><a class=menu-item href=/talks/ title>Talks</a><a class=menu-item href=/about/ title>About</a><a href=javascript:void(0); class="menu-item theme-select" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
<select class=color-theme-select id=theme-select-mobile title="Switch Theme"><option value=light>Light</option><option value=dark>Dark</option><option value=black>Black</option><option value=auto>Auto</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#install--configure-rancher-desktop>Install & configure Rancher Desktop</a></li><li><a href=#configure-docker-credential-store>Configure Docker Credential Store</a></li><li><a href=#get-containers-output-in-the-console>Get container&rsquo;s output in the console</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Configuring WSL2 for Seamless Compatibility with Rancher Desktop</h1><div class=post-meta><div class=post-meta-line><span class=post-author><span class="author fas fa-user-circle fa-fw"></span><a href=https://blog.touret.info title=Author target=_blank rel="noopener noreferrer author" class=author>Alexandre Touret</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2023-11-09>2023-11-09</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2023-11-09>2023-11-09</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;407 words&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div></div><div class=featured-image><img loading=eager src=/assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp srcset="/assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp, /assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp 1.5x, /assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp 2x" sizes=auto alt=/assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp title=/assets/images/2023/11/carlo-borella-ozDrGigNQXY-unsplash.webp height=auto width=auto></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#install--configure-rancher-desktop>Install & configure Rancher Desktop</a></li><li><a href=#configure-docker-credential-store>Configure Docker Credential Store</a></li><li><a href=#get-containers-output-in-the-console>Get container&rsquo;s output in the console</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=content id=content><p>Just out of curiosity, I <a href=https://docs.rancherdesktop.io/getting-started/installation#installing-rancher-desktop-on-windows target=_blank rel="noopener noreferrer">downloaded and sat up Rancher Desktop on my laptop</a>.</p><p>I daily use <a href=https://docs.docker.com/ target=_blank rel="noopener noreferrer">Docker</a> and <a href=https://docs.docker.com/compose/ target=_blank rel="noopener noreferrer">Docker compose</a> on top of <a href=https://learn.microsoft.com/en-us/windows/wsl/install target=_blank rel="noopener noreferrer">WSL2</a> using <em>home made mechanism/tooling</em>
I would then see if Rancher Desktop fits well in this case and could help me.</p><p>In this (very short) article, we&rsquo;ll go over the necessary steps to configure <a href=https://learn.microsoft.com/en-us/windows/wsl/install target=_blank rel="noopener noreferrer">WSL2</a> Ubuntu virtual machines and Docker with Rancher Desktop.</p><p>If you want to get into Rancher Desktop in another way and discover how to install <a href=https://skaffold.dev/ target=_blank rel="noopener noreferrer">Skaffold</a>, you <a href=https://malkav30.gitlab.io/posts/first-rancherdesktop-application-skaffold/ target=_blank rel="noopener noreferrer">can read this article</a>.</p><h2 id=install--configure-rancher-desktop class=headerLink><a href=#install--configure-rancher-desktop class=header-mark></a>1 Install & configure Rancher Desktop</h2><div id=id-1><figure><img loading=lazy src=/assets/images/2023/11/rancher-desktop-logo.svg srcset="/assets/images/2023/11/rancher-desktop-logo.svg, /assets/images/2023/11/rancher-desktop-logo.svg 1.5x, /assets/images/2023/11/rancher-desktop-logo.svg 2x" sizes=auto alt="rancher desktop logo" title="rancher desktop logo"></figure></div><p>The setup is quite straightforward.
Follow <a href=https://docs.rancherdesktop.io/getting-started/installation#installing-rancher-desktop-on-windows target=_blank rel="noopener noreferrer">the instructions provided in the official documentation</a> to get Rancher Desktop up and running on your Windows machine.
Rancher Desktop allows you to run Docker and Docker Compose seamlessly within a WSL2 environment.</p><p>During the setup process, I chose to install <a href=https://github.com/moby/moby target=_blank rel="noopener noreferrer">Moby</a> to use <a href=https://www.docker.com/ target=_blank rel="noopener noreferrer">Docker</a> and <a href=https://docs.docker.com/compose/ target=_blank rel="noopener noreferrer">Docker Compose</a>.</p><p>After installing Rancher Desktop, you will need to ensure your virtual machine (VM) is connected to expose the Docker daemon and related commands.
You can find detailed steps in the Rancher Desktop documentation under <a href=https://docs.rancherdesktop.io/ui/preferences/wsl/ target=_blank rel="noopener noreferrer">WSL Preferences</a>.
Don&rsquo;t forget that in some cases, you may need to restart both WSL2 and Rancher Desktop for the changes to take effect.</p><h2 id=configure-docker-credential-store class=headerLink><a href=#configure-docker-credential-store class=header-mark></a>2 Configure Docker Credential Store</h2><p>When you start your Docker compose infrastructure and encounter an error like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Error saving credentials: error storing credentials - err: exit status 1,
</span></span></code></pre></td></tr></table></div></div><p>You&rsquo;ll need to configure Docker&rsquo;s credential store.
To resolve this issue, follow these steps:</p><ol><li>Inside your WSL2 VM, create or edit the <code>~/.docker/config.json</code> file.</li><li>Add the following content to the <code>config.json</code> file:</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>                            
</span></span><span class=line><span class=cl><span class=nt>&#34;credsStore&#34;</span><span class=p>:</span> <span class=s2>&#34;wincred.exe&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>   
</span></span></code></pre></td></tr></table></div></div><p>This configuration points to the <code>docker-credential-wincred.exe</code> binary and will resolve the credential storage problem when using Docker.</p><h2 id=get-containers-output-in-the-console class=headerLink><a href=#get-containers-output-in-the-console class=header-mark></a>3 Get container&rsquo;s output in the console</h2><p>A common issue with Docker containers in Rancher Desktop is the lack of output in the console when running a container, such as with the command <code>docker run hello-world</code>.
This issue is well-documented in <a href=https://github.com/rancher-sandbox/rancher-desktop/issues/1558 target=_blank rel="noopener noreferrer">this GitHub issue</a>.</p><p>To view the container&rsquo;s output in the console, you need to start your commands with the <code>-i</code> option. For example:</p><p>For instance:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>docker run -i hello-world
</span></span></code></pre></td></tr></table></div></div><p>This option tells Docker to attach to the container&rsquo;s standard input, allowing you to see the output directly in your console.</p><h2 id=conclusion class=headerLink><a href=#conclusion class=header-mark></a>4 Conclusion</h2><p>I hope this article has been helpful for you, and you&rsquo;re now ready to <em>supercharge</em> your development workflow with Rancher Desktop and Docker!</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-11-09&nbsp;<a class=git-hash href=https://github.com/alexandre-touret/alexandre-touret.github.io/commit/cebbafaed0ac2e6dd3c668d3d6f173c0bf6a7e5b target=_blank title="commit by Alexandre Touret(alexandre.touret@worldline.com) cebbafaed0ac2e6dd3c668d3d6f173c0bf6a7e5b: feat: change date time and status" rel="noopener noreferrer">
<i class="fas fa-hashtag fa-fw"></i>cebbafa</a></span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-mardown href=/2023/11/09/rancher_desktop_wsl2/index.md target=_blank rel="noopener noreferrer">Read markdown</a>
</span><span>|&nbsp;<a class=link-to-source href=https://github.com/alexandre-touret/alexandre-touret.github.io/blob/main/exampleSite/content/posts/rancher_desktop_wsl2.en.md target=_blank rel="noopener noreferrer">View source</a>
</span><span>|&nbsp;<a class=link-to-report href="https://github.com/alexandre-touret/alexandre-touret.github.io/issues/new?title=[bug]%20Configuring+WSL2+for+Seamless+Compatibility+with+Rancher+Desktop&body=|Field|Value|%0A|-|-|%0A|Title|Configuring+WSL2+for+Seamless+Compatibility+with+Rancher+Desktop|%0A|Url|http://blog.touret.info/2023/11/09/rancher_desktop_wsl2/|%0A|Filename|https://github.com/HEIGE-PCloud/DoIt/blob/main/exampleSite/content/posts/rancher_desktop_wsl2.en.md|" target=_blank rel="noopener noreferrer">Report issue</a></span></div><div class=post-info-share></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/wsl2/>WSL2</a>,&nbsp;<a href=/tags/rancher_desktop/>Rancher_Desktop</a>,&nbsp;<a href=/tags/docker/>docker</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2023/11/01/pack-ship-java-deployment-distributed-tracing-elasticapm/ class=prev rel=prev title="Streamline Java Application Deployment: Pack, Ship, and Unlock Distributed Tracing with Elastic APM on Kubernetes"><i class="fas fa-angle-left fa-fw"></i>Streamline Java Application Deployment: Pack, Ship, and Unlock Distributed Tracing with Elastic APM on Kubernetes</a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" title="Hugo 0.121.1">Hugo</a>&nbsp;|&nbsp;Theme - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://blog.touret.info target=_blank rel="noopener noreferrer">Alexandre Touret</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC BY 4.0</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><link rel=stylesheet href=/css/73ba3f.min.css><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{utterances:{darkTheme:"github-dark",issueTerm:"pathname",label:"",lightTheme:"github-light",repo:"alexandre-touret/alexandre-touret.github.io"}},data:{"desktop-header-typeit":"blog.touret.info","mobile-header-typeit":"blog.touret.info"},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"No results found",snippetLength:300,threshold:.1,type:"fuse",useExtendedSearch:!1},table:{sort:!0},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},duration:-1,speed:100}}</script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script><script type=text/javascript src=/js/utterances.min.js defer></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F1EK89MHJD",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-F1EK89MHJD" async></script></div></body></html>