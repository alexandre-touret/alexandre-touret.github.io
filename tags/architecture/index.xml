<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Architecture - Tag - Alexandre Touret's Blog</title><link>https://blog.touret.info/tags/architecture/</link><description>Architecture - Tag - Alexandre Touret's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>This work is licensed under a Creative Commons Attribution 4.0 International License.</copyright><lastBuildDate>Wed, 09 Feb 2022 08:00:00 +0000</lastBuildDate><atom:link href="https://blog.touret.info/tags/architecture/" rel="self" type="application/rss+xml"/><item><title>Mieux analyser les risques pour simplifier les architectures (ou pas)</title><link>https://blog.touret.info/2022/02/09/analyser-les-risques-pour-mieux-definir-une-architecture/</link><pubDate>Wed, 09 Feb 2022 08:00:00 +0000</pubDate><author><name>Alexandre Touret</name></author><guid>https://blog.touret.info/2022/02/09/analyser-les-risques-pour-mieux-definir-une-architecture/</guid><description><![CDATA[<div class="featured-image">
                <img src="/assets/images/2022/02/architecture.webp" referrerpolicy="no-referrer">
            </div><h2 id="lanalyse-des-risques-kezako-" class="headerLink">
    <a href="#lanalyse-des-risques-kezako-" class="header-mark"></a>1 L&rsquo;analyse des risques: kezako ?</h2><p>Souvent utilis√©e dans la prise de d√©cision, l&rsquo;analyse des risques a plusieurs objectifs :</p>
<ul>
<li>Permettre de pond√©rer des risques potentiels</li>
<li>Faciliter la prise de d√©cision sur les actions √† r√©aliser pour les pr√©venir ou tout du moins les att√©nuer.</li>
</ul>
<p>Mais d&rsquo;abord, revenons aux bases. Comment identifier un risque ?</p>
<p>Selon <a href="https://fr.wikipedia.org/wiki/Risque" target="_blank" rel="noopener noreferrer">Wikipedia</a>, voici la d√©finition:</p>
<blockquote>
<p>Le risque est la possibilit√© de survenue d&rsquo;un √©v√©nement ind√©sirable, la probabilit√© d‚Äôoccurrence d&rsquo;un p√©ril probable ou d&rsquo;un al√©a.</p>
</blockquote>
<p>Bien √©videmment, on a les risques inconnus et ceux qui sont connus.
Le pr√©alable √† toute gestion de risque (tout du moins pour la d√©finition d&rsquo;architecture) est de capitaliser les connaissances et retours d&rsquo;exp√©rience qui viennent du terrain.</p>
<p>On va donc oublier les risques inconnus dans cet article.</p>
<h3 id="comment-les-d√©finir-" class="headerLink">
    <a href="#comment-les-d%c3%a9finir-" class="header-mark"></a>1.1 Comment les d√©finir ?</h3><p>Tout d&rsquo;abord, il faut conna√Ætre les <a href="https://sre.google/workbook/implementing-slos/" target="_blank" rel="noopener noreferrer">SLOs</a> de la plateforme qu&rsquo;on souhaite concevoir. Pourquoi ? Pour v√©rifier si les risques qu&rsquo;on identifiera plus tard sont pertinents ou tout du moins impactants.</p>
<p>Par exemple: Une panne √©lectrique sera faiblement impactante pour une application avec une disponibilit√© &lt; 70%.</p>
<p>La r√©alisation des SLIs et SLOs est un pr√©alable pour d√©finir <a href="https://cloud.google.com/blog/products/management-tools/sre-error-budgets-and-maintenance-windows" target="_blank" rel="noopener noreferrer">le &ldquo;budget d&rsquo;erreur&rdquo;</a>.
Ce dernier nous permettra <em>in fine</em> de quantifier les risques et de voir si il faut les att√©nuer.</p>
<p>Ensuite, pour chaque risque qu&rsquo;on identifiera (souvent √† partir de notre exp√©rience), on t√¢chera de d√©finir les caract√©ristiques suivantes:</p>
<ul>
<li>Cause</li>
<li>Probabilit√©</li>
<li>Cons√©quence (gravit√©)</li>
</ul>
<h4 id="un-exemple" class="headerLink">
    <a href="#un-exemple" class="header-mark"></a>1.1.1 Un exemple</h4><p><strong>La base de donn√©es est indisponible</strong></p>
<ul>
<li>Cause: Syst√®me de fichier plein</li>
<li>Probabilit√©: faible</li>
<li>Cons√©quence: forte (toute la plateforme est HS)</li>
</ul>
<p>Pour d√©terminer la cause, il y a plusieurs m√©thodes, l&rsquo;une des plus c√©l√®bres est celle <a href="https://fr.wikipedia.org/wiki/Cinq_pourquoi" target="_blank" rel="noopener noreferrer">des cinq pourquoi</a>.</p>
<p>Elle permet d&rsquo;acc√©der √† la cause du probl√®me.</p>
<p>Pour √©tablir la probabilit√©, les OPS seront vos meilleurs ami.e.s.
Vous remontrez dans le temps pour d√©terminer quels ont √©t√© les diff√©rents incidents.
Pour chacun, vous devrez d√©finir ces trois caract√©ristiques : cause, probabilit√©, cons√©quence.</p>
<p>A cot√© de √ßa, vous aurez √† identifier si possible le temps d&rsquo;indisponibilit√© du service.</p>
<h3 id="synth√®se" class="headerLink">
    <a href="#synth%c3%a8se" class="header-mark"></a>1.2 Synth√®se</h3><p>Une fois ce travail de fourmi r√©alis√©, vous pourrez le synth√©tiser dans un premier temps avec ce formalisme souvent repris dans la gestion de projet:</p>
<div id="id-1"><figure><img
        
        loading="lazy"
        src="/assets/images/2022/02/Risk-Based-Audit_technical.webp"
        srcset="/assets/images/2022/02/Risk-Based-Audit_technical.webp, /assets/images/2022/02/Risk-Based-Audit_technical.webp 1.5x, /assets/images/2022/02/Risk-Based-Audit_technical.webp 2x"
        title="analyse de risques" ></figure></div>
<p>En r√©sum√©, les actions qui sont oranges ou rouges doivent √™tre trait√©es et avoir un plan d&rsquo;action.</p>
<p>Prenons la d√©finition d&rsquo;une plateforme:
Si votre API doit traiter de mani√®re r√©guli√®re des PAYLOADs volumineux (bon d√©j√†, la ce n&rsquo;est pas top).
Le temps de traitement peut √™tre tr√®s long et bloquer certaines ressources (ex. des sous transactions).</p>
<p>Dans ce cas, la probabilit√© sera √† probable et l&rsquo;impact sera mod√©r√© ou majeur. Par cons√©quent, vous devrez le prendre en compte avec par exemple un <a href="https://blog.touret.info/2021/07/26/observabilite-et-circuit-breaker-avec-spring/" target="_blank" rel="noopener noreferrer">circuit breaker</a>.</p>
<p>Pour aller encore plus loin, vous pouvez √©galement √©valuer les risques en fonction de votre budget d&rsquo;erreur: Est-ce que l&rsquo;erreur peut rentrer dans mon budget ou pas?
Bref, est-ce acceptable?</p>
<p>Si vous allez plus loin, je vous conseille la formation <a href="https://www.coursera.org/learn/site-reliability-engineering-slos" target="_blank" rel="noopener noreferrer">Coursera Site Reliability Engineering: Measuring and Managing Reliability</a>.</p>
<h2 id="ok-jai-identifi√©-les-risques-potentiels-quest-ce-que-jen-fait-maintenant" class="headerLink">
    <a href="#ok-jai-identifi%c3%a9-les-risques-potentiels-quest-ce-que-jen-fait-maintenant" class="header-mark"></a>2 OK, j&rsquo;ai identifi√© les risques potentiels. Qu&rsquo;est-ce que j&rsquo;en fait maintenant?</h2><p>C&rsquo;est l√† que d√©marre r√©ellement le travail d&rsquo;architecture: vous devrez √©valuer chaque risque en fonction des exigences fonctionnelles et technique pour savoir si elles valent la peine d&rsquo;√™tre prises en consid√©ration.
Si vous avez des risques de faible impact, vous pourrez soit les &ldquo;mettre sous contr√¥le&rdquo; pour traiter d&rsquo;autres probl√®mes, soit les traiter car ils sont &ldquo;faciles&rdquo; √† traiter et vous permettront d&rsquo;agrandir votre &ldquo;budget d&rsquo;erreur&rdquo;.
Dans ce dernier cas, vous aurez la possibilit√© de laisser &ldquo;de cot√©&rdquo; d&rsquo;autres erreurs plus compliqu√©es √† traiter car elles rentreront dans votre budget.</p>
<p>Bref, c&rsquo;est un vrai travail de fourmi qui se base sur l&rsquo;exp√©rience du terrain.</p>
<h2 id="_quid_-de-larchitecture" class="headerLink">
    <a href="#_quid_-de-larchitecture" class="header-mark"></a>3 <em>Quid</em> de l&rsquo;architecture?</h2><p>Si vous avez √©valu√© les risques correctement, vous pourrez ne traiter que les risques qui en valent la peine et par cons√©quent n&rsquo; ajouter de la complexit√© que l√† ou √ßa en vaut la peine!</p>
<p><strong>Oui, ce travail pr√©alable permet de faire simple!</strong></p>
<h2 id="un-exemple-concret" class="headerLink">
    <a href="#un-exemple-concret" class="header-mark"></a>4 Un exemple concret</h2><p>Si je reprends l&rsquo;application <a href="https://github.com/alexandre-touret/bookstore_spring" target="_blank" rel="noopener noreferrer">bookstore</a> que j&rsquo;ai d√©crite dans <a href="https://blog.touret.info/2021/07/26/observabilite-et-circuit-breaker-avec-spring/" target="_blank" rel="noopener noreferrer">un pr√©c√©dent article</a>:</p>
<p><figure><img
        
        loading="lazy"
        src="/assets/images/2021/07/rest-book-architecture.png"
        srcset="/assets/images/2021/07/rest-book-architecture.png, /assets/images/2021/07/rest-book-architecture.png 1.5x, /assets/images/2021/07/rest-book-architecture.png 2x"
        title="bookstore architecture" ></figure></p>
<h3 id="exigences-techniques" class="headerLink">
    <a href="#exigences-techniques" class="header-mark"></a>4.1 Exigences techniques</h3><h4 id="slos--slis" class="headerLink">
    <a href="#slos--slis" class="header-mark"></a>4.1.1 SLOs / SLIs</h4><p>Pour cet exemple, je ne vais traiter que deux exigences techniques:</p>
<table>
<thead>
<tr>
<th>SLO</th>
<th>SLI</th>
</tr>
</thead>
<tbody>
<tr>
<td>L&rsquo;API Bookstore doit √™tre disponible 99%</td>
<td>Nombre de r√©ponses HTTP = 2XX ou 4XX</td>
</tr>
<tr>
<td>L&rsquo;API Bookstore doit r√©pondre en moins de 1 sec</td>
<td>Temps de r√©ponse de l&rsquo;API</td>
</tr>
</tbody>
</table>
<h4 id="volum√©trie" class="headerLink">
    <a href="#volum%c3%a9trie" class="header-mark"></a>4.1.2 Volum√©trie</h4><ul>
<li>100 transactions par seconde (TPS)</li>
<li>100 utilisateurs simultan√©s</li>
</ul>
<h3 id="risques-identifi√©s" class="headerLink">
    <a href="#risques-identifi%c3%a9s" class="header-mark"></a>4.2 Risques identifi√©s</h3><p>Sans aller dans le d√©tail, voici quelques risques que l&rsquo;on peut identifier de prime abord dans cette architecture:</p>
<ul>
<li>Indisponibilit√© du service bookstore</li>
<li>Indisponibilit√© du service booknumber</li>
<li>Indisponibilit√© de la base de donn√©es √† cause d&rsquo;une forte volum√©trie</li>
</ul>
<p>En vous basant sur l&rsquo;exp√©rience de vos OPS, vous pourrez √©galement ajouter des risques li√©s √† l&rsquo;infrastructure (routeurs, DNS, &hellip;).
Je ne vais pas les aborder dans cet article.</p>
<h3 id="qualification-des-risques" class="headerLink">
    <a href="#qualification-des-risques" class="header-mark"></a>4.3 Qualification des risques</h3><p>Voici une rapide qualification:</p>
<table>
<thead>
<tr>
<th>Risques</th>
<th>Probabilit√©</th>
<th>Impact</th>
</tr>
</thead>
<tbody>
<tr>
<td>Indisponibilit√© du service bookstore</td>
<td>Probable</td>
<td>Majeur</td>
</tr>
<tr>
<td>Indisponibilit√© du service booknumber</td>
<td>Probable</td>
<td>Majeur</td>
</tr>
<tr>
<td>Indisponibilit√© de la base de donn√©es</td>
<td>Possible</td>
<td>Catastrophique</td>
</tr>
</tbody>
</table>
<p>Si on se r√©f√®re au premier diagramme, il est obligatoire de les prendre en compte.</p>
<h3 id="solutions-darchitecture-pour-leur-prise-en-compte" class="headerLink">
    <a href="#solutions-darchitecture-pour-leur-prise-en-compte" class="header-mark"></a>4.4 Solutions d&rsquo;architecture pour leur prise en compte</h3><p>Une fois les risques identifi√©s, on peut tout d&rsquo;abord les confronter √† notre budget d&rsquo;erreur pour valider leur prise en compte dans notre conception.</p>
<p>Dans notre cas, on va prendre le postulat qu&rsquo;il faut r√©ellement les prendre en consid√©ration et trouver une solution adapt√©e.</p>
<p>Voici des exemples de solutions qui permettraient de faire descendre leur impact our leur probabilit√©.</p>
<table>
<thead>
<tr>
<th>Risques</th>
<th>Probabilit√©</th>
<th>Impact</th>
<th>Action/Solutions possibles</th>
</tr>
</thead>
<tbody>
<tr>
<td>Indisponibilit√© du service bookstore</td>
<td>Possible</td>
<td>Majeur</td>
<td>Load balancing avec deux instances, Utilisation Kubernetes,.</td>
</tr>
<tr>
<td>Indisponibilit√© du service booknumber</td>
<td>Possible</td>
<td>Majeur</td>
<td>Sur le service book-number:<br>Load balancing avec deux instances, Utilisation Kubernetes,..<br><br>Sur le service bookstore:<br><br>Mettre en place un circuit breaker bas√© sur le timeout d&rsquo;appel <br>vers le service book-number pour garantir la SLO</td>
</tr>
<tr>
<td>Indisponibilit√© de la base de donn√©es</td>
<td>Possible</td>
<td>Catastrophique</td>
<td>- R√©alisation d&rsquo;un benchmark pour s&rsquo;assurer qu&rsquo;une instance est suffisante.<br><br>- Sinon mise en place m√©canisme HA ou changement de technologie</td>
</tr>
</tbody>
</table>
<h2 id="conclusion" class="headerLink">
    <a href="#conclusion" class="header-mark"></a>5 Conclusion</h2><p>L&rsquo;analyse des risques n&rsquo;est pas r√©cente et n&rsquo;a pas √©t√© invent√©e par le monde de l&rsquo;informatique.
Elle est d&rsquo;abord apparue dans la gestion de projets et fait d√©sormais partie prenante de la d√©finition d&rsquo;architectures (enfin √ßa commence&hellip;).
Il ne faut pas la voir seulement pour un outil de &ldquo;GO-NO GO&rdquo; de r√©union de cellule de crise mais comme une aide √† la d√©cision pour la conception des syst√®mes.</p>
<p>Il a toute sa place √† cot√© des diff√©rentes caract√©ristiques que vous devrez prendre en compte ( s√©curit√©, modularit√©, &hellip;).
J&rsquo;ai essay√© de d√©crire comment les identifier et trouver une solution adapt√©e dans l&rsquo;exemple.
Bien √©videmment, il n&rsquo;est pas complet.
Je pense n√©anmoins qu&rsquo;il permet d&rsquo;avoir une id√©e sur le sujet.</p>
<p>Le principal avantage d&rsquo;utiliser √† la fois les SLOs/SLIs, le budget d&rsquo;erreur et l&rsquo;analyse des risques est de <strong>n&rsquo;apporter de la complexit√© que l√† o√π c&rsquo;est n√©cessaire</strong>.</p>
<p>Pour certains un benchmark sera souvent utile pour confirmer votre d√©cision.</p>
<p>Si vous voulez aller plus loin, je vous conseille dans un premier temps de lire <a href="https://fundamentalsofsoftwarearchitecture.com/" target="_blank" rel="noopener noreferrer">&ldquo;Fundamentals of Software Architecture&rdquo;</a>.
Ce sujet y est abord√©.</p>
<p>Enfin,si ce sujet vous int√©resse, vous pouvez vous projeter au d√©l√† de l&rsquo;informatique en lisant les analyses de risques r√©alis√©es par <a href="https://www.economie.gouv.fr/files/files/directions_services/tracfin/analyse-nationale-des-risques-lcb-ft-en-France-septembre-2019.pdf" target="_blank" rel="noopener noreferrer">le Minist√®re des finances</a>.</p>
<p>Bonne lecture ;-)</p>
]]></description></item><item><title>Touraine Tech 2019</title><link>https://blog.touret.info/2019/02/02/touraine-tech-2019-2/</link><pubDate>Sat, 02 Feb 2019 09:59:35 +0100</pubDate><author><name>Alexandre Touret</name></author><guid>https://blog.touret.info/2019/02/02/touraine-tech-2019-2/</guid><description><![CDATA[<p>J&rsquo;ai fini l&rsquo;√©dition 2019 du Touraine Tech. Tout d&rsquo;abord, merci aux organisateurs pour l&rsquo;accueil et l&rsquo;organisation. C&rsquo;√©tait vraiment top!</p>
<p>Cette ann√©e, je n&rsquo;ai pas pu faire beaucoup de conf√©rences. Mon Hands on m&rsquo;ayant retenu une bonne partie de l&rsquo;apr√®s midi, que √ßa soit durant le talk ou apr√®s pour d√©compresser üôÇ</p>
<p>Mon hands on portait sur l&rsquo;architecture, j&rsquo;ai eu une vingtaine de personnes qui l&rsquo;on suivi et ont pratiqu√© sur diff√©rents sujets.</p>
<p>{% include gallery caption=&ldquo;Un kata d&rsquo;architecture √† TNT&rdquo;  layout=&ldquo;half&rdquo; %}</p>
<p>La cave √† vin connect√© a remport√© un franc succ√®s, du moins pendant la pr√©sentation des sujets üôÇ</p>
<p>Voici le feedback que j&rsquo;ai eu sur ma pr√©sentation:</p>
<p><figure><img
        
        loading="lazy"
        src="/assets/images/2019/02/img_20190201_174057.jpg"
        srcset="/assets/images/2019/02/img_20190201_174057.jpg, /assets/images/2019/02/img_20190201_174057.jpg 1.5x, /assets/images/2019/02/img_20190201_174057.jpg 2x"
        title="Feedback" ></figure></p>
<p>RDV l&rsquo;ann√©e prochaine !</p>
]]></description></item><item><title>Touraine Tech 2019</title><link>https://blog.touret.info/2018/12/25/touraine-tech-2019/</link><pubDate>Tue, 25 Dec 2018 17:24:29 +0100</pubDate><author><name>Alexandre Touret</name></author><guid>https://blog.touret.info/2018/12/25/touraine-tech-2019/</guid><description><![CDATA[<div class="featured-image">
                <img src="/assets/images/2018/12/touraine_tech.png" referrerpolicy="no-referrer">
            </div><p>Mon sujet de talk ¬´¬†Objectif Top Architecte¬†¬ª a √©t√© retenu pour l&rsquo;√©dition 2019 de <a href="https://touraine.tech/" target="_blank" rel="noopener noreferrer">Touraine Tech</a>.</p>
<p><strong>R√©servez le 1 f√©vrier 2019 dans votre agenda !</strong></p>
<p>Tout d&rsquo;abord merci aux organisateurs pour leur confiance. Je suis vraiment¬† honor√© d&rsquo;√™tre s√©lectionn√© une deuxi√®me ann√©e cons√©cutive.</p>
<p>Cette ann√©e, j&rsquo;animerai un hands on sur l&rsquo;architecture. Je vais t√¢cher de vulgariser quelques principes qui me paraissent importants et animer un ¬´¬†coding dojo de l&rsquo;architecture¬†¬ª.</p>
<p>Pas besoin d&rsquo;√™tre architecte ou (<em>vraiment, ‚Ä¶ mais vraiment pas besoin</em>) d&rsquo;avoir une certification TOGAF pour y participer üôÇ</p>
]]></description></item></channel></rss>