<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>musique - Tag - Alexandre Touret's Blog</title><link>http://blog.touret.info/tags/musique/</link><description>musique - Tag - Alexandre Touret's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>This work is licensed under a Creative Commons Attribution 4.0 International License.</copyright><lastBuildDate>Sun, 12 Apr 2020 14:47:48 +0200</lastBuildDate><atom:link href="http://blog.touret.info/tags/musique/" rel="self" type="application/rss+xml"/><item><title>Répéter avec JjazzLab tout seul dans son garage</title><link>http://blog.touret.info/2020/04/12/repeter-avec-jjazzlab-tout-seul-dans-son-garage/</link><pubDate>Sun, 12 Apr 2020 14:47:48 +0200</pubDate><author><name>Alexandre Touret</name></author><guid>http://blog.touret.info/2020/04/12/repeter-avec-jjazzlab-tout-seul-dans-son-garage/</guid><description><![CDATA[<div class="featured-image">
                <img src="/assets/images/2020/04/thomas-litangen-sp9hcrasmpe-unsplash.jpg" referrerpolicy="no-referrer">
            </div><p>Avec les contraintes liées au confinement, les <a href="http://george-abitbol.fr/v/c0bce857" target="_blank" rel="noopener noreferrer">répétitions</a> se font de plus en plus rares. Pour ne pas perdre la main, il y a quelques logiciels qui permettent de jouer d&rsquo;un instrument et d&rsquo; improviser tout en ayant une bande son en fond musical.</p>
<p>Il y a plusieurs logiciels payants/propriétaires sur différentes plateformes:</p>
<ul>
<li><a href="https://www.bandinabox.com/bb.php?os=win&amp;lang=fr" target="_blank" rel="noopener noreferrer">Band in a box</a></li>
<li><a href="https://www.apple.com/fr/mac/garageband/" target="_blank" rel="noopener noreferrer">irealpro</a></li>
<li><a href="https://www.apple.com/fr/mac/garageband/" target="_blank" rel="noopener noreferrer">Garage band</a></li>
<li><a href="https://www.jjazzlab.com/en/" target="_blank" rel="noopener noreferrer">Jjazzlabs</a></li>
</ul>
<p>J&rsquo;ai découvert ce dernier récemment en naviguant sur le site <a href="http://linuxmao.org/JJazzLab" target="_blank" rel="noopener noreferrer">Linux Mao</a>. Il a l&rsquo;avantage d&rsquo;être gratuit (<a href="https://github.com/jjazzboss/JJazzLab-X" target="_blank" rel="noopener noreferrer">le moteur est sous licence LGPL 3.0</a>, pas le logiciel en tant que tel), de fonctionner sous GNU/LINUX, d&rsquo; offrir un son pas mal du tout et de permettre la configuration de la dynamique au fur et à mesure du morceau.</p>
<p>Je vais expliquer comment l&rsquo;installer sur <a href="https://www.debian.org/" target="_blank" rel="noopener noreferrer">Debian</a>.</p>
<h2 id="configuration-midi" class="headerLink">
    <a href="#configuration-midi" class="header-mark"></a>1 Configuration Midi</h2><h3 id="activation-des-périphériques-virtuels-midi" class="headerLink">
    <a href="#activation-des-p%c3%a9riph%c3%a9riques-virtuels-midi" class="header-mark"></a>1.1 Activation des périphériques virtuels MIDI</h3><p>Créer un fichier <code>/etc/modules.load.d/midi.conf</code> avec le contenu suivant:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">snd-virmidi
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ensuite créer le fichier <code>/etc/modprobe.d/midi.conf</code> avec le contenu suivant:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">options snd-virmidi <span class="nv">midi_devs</span><span class="o">=</span><span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Logiquement à ce stade, lors du prochain reboot, vous aurez un périphérique virtuel MIDI activé. En attendant vous pouvez lancer la commande suivante</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo modprobe snd-virmidi <span class="nv">midi_devs</span><span class="o">=</span><span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="synthétiser-du-midi" class="headerLink">
    <a href="#synth%c3%a9tiser-du-midi" class="header-mark"></a>1.2 Synthétiser du MIDI</h3><p>Pour faire fonctionner ce logiciel, il faut installer une banque de son ( <a href="https://fr.wikipedia.org/wiki/SoundFont" target="_blank" rel="noopener noreferrer">au format SF2</a>) et un logiciel permettant de l&rsquo;utiliser pour synthétiser du MIDI.<br>
La banque de son recommandée est disponible via <a href="https://musical-artifacts.com/artifacts/1036" target="_blank" rel="noopener noreferrer">ce lien</a>. Téléchargez là et copiez la dans un répertoire accessible.</p>
<p>Pour le second, il vous faudra installer <a href="http://www.fluidsynth.org/" target="_blank" rel="noopener noreferrer">fluidsynth</a>. Voic les quelques commandes à lancer:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo apt install fluid-synth qsynth
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="petite-vérification8230" class="headerLink">
    <a href="#petite-v%c3%a9rification8230" class="header-mark"></a>1.3 Petite vérification…</h3><p>Avant d&rsquo; aller plus loin dans la configuration de fluidsynth, vous pouvez vous assurer que tout est OK <a href="https://en.wikipedia.org/wiki/File:MIDI_sample.mid?qsrc=3044" target="_blank" rel="noopener noreferrer">en récupérant un fichier MIDI</a> et en lançant la commande suivante:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ fluidsynth -a pulseaudio -m alsa_seq -l -i /opt/JJazzLab-2.0-Linux/JJazzLab-SoundFont.sf2  MIDI_sample.mid
</span></span></code></pre></td></tr></table>
</div>
</div><p>Normalement vous devriez avoir du son.</p>
<h3 id="configurer-fluidsynth" class="headerLink">
    <a href="#configurer-fluidsynth" class="header-mark"></a>1.4 Configurer fluidsynth</h3><p>Lancez qsynth et cliquez sur le bouton « configuration »</p>
<p>Vous trouverez ci-dessous la configuration que j&rsquo;ai appliqué. Elle diffère légèrement de <a href="https://www.jjazzlab.com/en/doc/fluidsynth/" target="_blank" rel="noopener noreferrer">celle présentée dans la documentation</a>.</p>
<div id="id-1"><p><figure><img
        
        loading="lazy"
        src="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-04-39.png"
        srcset="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-04-39.png, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-04-39.png 1.5x, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-04-39.png 2x"
        sizes="auto"
        alt="fluidsynth1"
        title="fluidsynth1" ></figure></p>
<p><figure><img
        
        loading="lazy"
        src="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-02.png"
        srcset="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-02.png, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-02.png 1.5x, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-02.png 2x"
        sizes="auto"
        alt="fluidsynth2"
        title="fluidsynth2" ></figure></p>
<p><figure><img
        
        loading="lazy"
        src="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-13.png"
        srcset="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-13.png, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-13.png 1.5x, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-05-13.png 2x"
        sizes="auto"
        alt="fluidsynth3"
        title="fluidsynth3" ></figure></p>
</div>
<p>Pensez à redémarrer fluidsynth après application de ces nouveaux paramètres.</p>
<h3 id="configurer-aconnect" class="headerLink">
    <a href="#configurer-aconnect" class="header-mark"></a>1.5 Configurer aconnect</h3><p>Disclaimer: La c&rsquo;est la partie la plus obscure…</p>
<div id="id-2"><figure><img
        
        loading="lazy"
        src="/assets/images/2020/04/pegi_18_annotated_2009-2010.webp"
        srcset="/assets/images/2020/04/pegi_18_annotated_2009-2010.webp, /assets/images/2020/04/pegi_18_annotated_2009-2010.webp 1.5x, /assets/images/2020/04/pegi_18_annotated_2009-2010.webp 2x"
        sizes="auto"
        alt="aconnect"
        title="aconnect" ></figure></div>
<p>Il faut maintenant « brancher » la sortie du synthétiseur virtuel MIDI à fluidsynth pour que le son MIDI soit interprété par ce dernier à travers sa banque de son. Ce n&rsquo;est pas intuitif, je vous avais prévenu …<br>
Je ne vous parle pas de la pseudo interface graphique à aconnect. La ligne de console est plus parlante ( c&rsquo;est pour dire ) .</p>
<p>Exécutez la commande suivante:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ aconnect -lo                                            
</span></span><span class="line"><span class="cl">client 14: <span class="s1">&#39;Midi Through&#39;</span> <span class="o">[</span><span class="nv">type</span><span class="o">=</span>noyau<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">0</span> <span class="s1">&#39;Midi Through Port-0&#39;</span>
</span></span><span class="line"><span class="cl">client 24: <span class="s1">&#39;Virtual Raw MIDI 2-0&#39;</span> <span class="o">[</span><span class="nv">type</span><span class="o">=</span>noyau,card<span class="o">=</span>2<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">0</span> <span class="s1">&#39;VirMIDI 2-0     &#39;</span>
</span></span><span class="line"><span class="cl">client 128: <span class="s1">&#39;FLUID Synth (JJLAB)&#39;</span> <span class="o">[</span><span class="nv">type</span><span class="o">=</span>utilisateur,pid<span class="o">=</span>17838<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">0</span> <span class="s1">&#39;Synth input port (JJLAB:0)&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Dans mon cas, je vais avoir à connecter le client 24:0 au synthétiseur 128:0 grâce à la commande :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ aconnect 24:0 128:0
</span></span></code></pre></td></tr></table>
</div>
</div><p>Maintenant, si on relance la commande <code>aconnect -lo</code> on obtient le résultat suivant:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">client 14: <span class="s1">&#39;Midi Through&#39;</span> <span class="o">[</span><span class="nv">type</span><span class="o">=</span>noyau<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">0</span> <span class="s1">&#39;Midi Through Port-0&#39;</span>
</span></span><span class="line"><span class="cl">client 24: <span class="s1">&#39;Virtual Raw MIDI 2-0&#39;</span> <span class="o">[</span><span class="nv">type</span><span class="o">=</span>noyau,card<span class="o">=</span>2<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">0</span> <span class="s1">&#39;VirMIDI 2-0     &#39;</span>
</span></span><span class="line"><span class="cl">	Connexion À: 128:0
</span></span><span class="line"><span class="cl">client 128: <span class="s1">&#39;FLUID Synth (JJLAB)&#39;</span> <span class="o">[</span><span class="nv">type</span><span class="o">=</span>utilisateur,pid<span class="o">=</span>17838<span class="o">]</span>
</span></span><span class="line"><span class="cl">    <span class="m">0</span> <span class="s1">&#39;Synth input port (JJLAB:0)&#39;</span>
</span></span><span class="line"><span class="cl">	Connecté Depuis: 24:0
</span></span></code></pre></td></tr></table>
</div>
</div><p>Attention, cette commande devra être lancée ( ainsi que fluidsynth) avant chaque démarrage de jjazzlab.</p>
<h2 id="installation-de-jjazzlab" class="headerLink">
    <a href="#installation-de-jjazzlab" class="header-mark"></a>2 Installation de Jjazzlab</h2><p>Téléchargez les binaires sur <a href="https://www.jjazzlab.com/en/download/" target="_blank" rel="noopener noreferrer">ce site</a>, puis décompressez l&rsquo;archive dans le répertoire <code>/opt</code> par ex.</p>
<p>Vous devez également installer java</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo apt install openjdk-11-jdk
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ensuite, vous devez créer le fichier <code>~/.local/share/applications/jjazzlab.desktop</code> avec le contenu suivant:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="k">[Desktop Entry]</span>
</span></span><span class="line"><span class="cl"><span class="na">Type</span><span class="o">=</span><span class="s">Application</span>
</span></span><span class="line"><span class="cl"><span class="na">Name</span><span class="o">=</span><span class="s">JJazzLab</span>
</span></span><span class="line"><span class="cl"><span class="na">GenericName</span><span class="o">=</span><span class="s">JJazzLab</span>
</span></span><span class="line"><span class="cl"><span class="na">Icon</span><span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="na">Exec</span><span class="o">=</span><span class="s">&#34;/opt/JJazzLab-2.0-Linux/bin/jjazzlab&#34;</span>
</span></span><span class="line"><span class="cl"><span class="na">Terminal</span><span class="o">=</span><span class="s">false</span>
</span></span><span class="line"><span class="cl"><span class="na">Categories</span><span class="o">=</span><span class="s">Audio;Music;Player;AudioVideo;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Maintenant vous pouvez directement démarrer JJazzlab via le menu.</p>
<h2 id="configuration" class="headerLink">
    <a href="#configuration" class="header-mark"></a>3 Configuration</h2><p>Une fois jjazzlab démarré, vous devez aller dans le menu « Tools&gt;Options » et sélectionnez les valeurs suivantes:</p>
<div id="id-3"><figure><img
        
        loading="lazy"
        src="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-29-27.png"
        srcset="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-29-27.png, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-29-27.png 1.5x, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-29-27.png 2x"
        sizes="auto"
        alt="configuration"
        title="configuration" ></figure></div>
<p>Ouvrez un fichier example (ex. sunny )</p>
<p>Cliquez sur le menu décrit par un clavier</p>
<div id="id-4"><figure><img
        
        loading="lazy"
        src="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-34-11.png"
        srcset="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-34-11.png, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-34-11.png 1.5x, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-34-11.png 2x"
        sizes="auto"
        alt="configuration"
        title="configuration" ></figure></div>
<p>Puis configurez comme suit:</p>
<div id="id-5"><figure><img
        
        loading="lazy"
        src="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-35-04.png"
        srcset="/assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-35-04.png, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-35-04.png 1.5x, /assets/images/2020/04/capture-de28099c3a9cran-du-2020-04-12-15-35-04.png 2x"
        sizes="auto"
        alt="configuration"
        title="configuration" ></figure></div>
<p>Maintenant vous pouvez <a href="https://www.jjazzlab.com/docs/JJazzLab-Realbook.zip" target="_blank" rel="noopener noreferrer">télécharger les standards fournis sur le site</a> et improviser dessus 🙂</p>
]]></description></item></channel></rss>